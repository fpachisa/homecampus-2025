'''
Created on May 27, 2012

@author: Farhat Pachisa

Copyright:
    Copyright (c) 2012, Home Campus.  All Rights Reserved.

Usage:
  
History:
'''

import random

#Decimal Add Subtract
P4DCAS = [random.choice(['ProblemType1','ProblemTypeMCQ1']),
          random.choice(['ProblemType2','ProblemTypeMCQ2']),
          random.choice(['ProblemType3','ProblemTypeMCQ3']),
          random.choice(['ProblemType4','ProblemTypeMCQ4']),
          random.choice(['ProblemType5','ProblemTypeMCQ5']),
          random.choice(['ProblemType6','ProblemTypeMCQ6']),
          random.choice(['ProblemType7','ProblemTypeMCQ7']),
          random.choice(['ProblemType8','ProblemTypeMCQ8']),
          ]

#Decimal Comparing and Ordering
P4DCCO = ['ProblemType1','ProblemType2','ProblemType3','ProblemType4','ProblemType5','ProblemType6',
          'ProblemType7','ProblemType8','ProblemType9','ProblemTypeMCQ1','ProblemTypeMCQ2','ProblemTypeMCQ3',
          'ProblemTypeMCQ4','ProblemTypeMCQ5']

#Decimal Fractions
P4DCFR = ['ProblemType1','ProblemType2','ProblemType3','ProblemType4','ProblemType5','ProblemType6',
          'ProblemType7',]

#Decimal Hundredths
P4DCHD = ['ProblemType1','ProblemType2','ProblemType3','ProblemType4','ProblemType5','ProblemType6','ProblemType7',
          'ProblemType8','ProblemType9','ProblemType10','ProblemType11','ProblemType12','ProblemType13','ProblemType14',]

#Decimal Multiply Divide
P4DCMD = ['ProblemType1','ProblemType2','ProblemType3','ProblemType4','ProblemType5','ProblemType6',]

#Decimal Rounding Off
P4DCRO = ['ProblemType1','ProblemType2','ProblemType3','ProblemType4','ProblemType5','ProblemType6',]

#Decimal Tenths
P4DCTT = ['ProblemType1','ProblemType2','ProblemType3','ProblemType4','ProblemType5','ProblemType6','ProblemType7',
          'ProblemType8','ProblemType9','ProblemType10','ProblemType11','ProblemType12','ProblemType13','ProblemType14',]

#Decimal Thousandths
P4DCTH = ['ProblemType1','ProblemType2','ProblemType3','ProblemType4','ProblemType5','ProblemType6','ProblemType7',
          'ProblemType8','ProblemType9','ProblemType10','ProblemType11','ProblemType12','ProblemType13','ProblemType14',]

#Decimal Word Problems
P4DCWP = [random.choice(['ProblemType1a','ProblemType1b']),'ProblemType2',
          'ProblemType3',random.choice(['ProblemType4a','ProblemType4b']),'ProblemType5',
          'ProblemType6','ProblemType7','ProblemType8','ProblemType9',]

#Fractions Add Like Related Fractions
P4FRAL = [random.choice(['ProblemType1','ProblemTypeMCQ1']),
          random.choice(['ProblemType2','ProblemTypeMCQ2']),
          random.choice(['ProblemType3','ProblemTypeMCQ3']),
          random.choice(['ProblemType4','ProblemTypeMCQ4']),
          random.choice(['ProblemType5','ProblemTypeMCQ5']),]

#Fractions Mixed Numbers Improper Fractions
P4FRMN = [random.choice(['ProblemType1','ProblemTypeMCQ1']),
          random.choice(['ProblemType2','ProblemTypeMCQ2']),]

#Fractions Multiply Proper Improper Fractions
P4FRMP = [random.choice(['ProblemType1','ProblemTypeMCQ1']),
          random.choice(['ProblemType2','ProblemTypeMCQ2']),]

#Fractions Simplifying Fractions
P4FRSF = [random.choice(['ProblemType1','ProblemTypeMCQ1']),
          random.choice(['ProblemType2','ProblemTypeMCQ2']),]

#Fractions Subtract Like Related
P4FRSL = [random.choice(['ProblemType1','ProblemTypeMCQ1']),
          random.choice(['ProblemType2','ProblemTypeMCQ2']),
          random.choice(['ProblemType3','ProblemTypeMCQ3']),
          random.choice(['ProblemType4','ProblemTypeMCQ4']),
          random.choice(['ProblemType5','ProblemTypeMCQ5']),]

#Fractions Word Problems
P4FRWP = ['ProblemType1','ProblemType2','ProblemType3','ProblemType4','ProblemType5',
          'ProblemType6',random.choice(['ProblemType7a','ProblemType7b','ProblemType7c']),]

#Measurement Area
P4MTAR = [random.choice(['ProblemType1','ProblemTypeMCQ1']),
          random.choice(['ProblemType2','ProblemTypeMCQ2']),
          random.choice(['ProblemType3','ProblemTypeMCQ3']),]

#Measurement Composite Figures
P4MTCF = ['ProblemType1','ProblemType2','ProblemType3','ProblemType4',
          'ProblemType5','ProblemType6','ProblemType7','ProblemType8',]

#Measurement Perimeter
P4MTPR = [random.choice(['ProblemType1','ProblemTypeMCQ1']),
          random.choice(['ProblemType2','ProblemTypeMCQ2']),
          random.choice(['ProblemType3','ProblemTypeMCQ3']),]

#Measurement Time 24HRs
P4MTTH = ['ProblemType1','ProblemType2',]

#Measurement Time Duration

P4MTTD = [random.choice(['ProblemType1','ProblemTypeMCQ1']),
          random.choice(['ProblemType2','ProblemTypeMCQ2']),
          'ProblemType3','ProblemType4',]

#Whole Numbers Comparing and Ordering

P4WNCO = [random.choice(['ProblemType1','ProblemTypeMCQ1']),
          random.choice(['ProblemType2','ProblemTypeMCQ2']),
          random.choice(['ProblemType3','ProblemTypeMCQ3']),
          random.choice(['ProblemType4','ProblemTypeMCQ4']),
          'ProblemTypeMCQ5','ProblemTypeMCQ6',]

#Whole Numbers Factor Multiple

P4WNFM = ['ProblemType1','ProblemType2','ProblemType3','ProblemType4',
          'ProblemType5','ProblemType6','ProblemType7','ProblemType8',]

#Whole Numbers Multiplication Division

P4WNMD = ['ProblemType1','ProblemType2','ProblemType3','ProblemType4',]

#Whole Numbers Place Value

P4WNPV = [random.choice(['ProblemType1','ProblemTypeMCQ1']),
          random.choice(['ProblemType2','ProblemTypeMCQ2']),
          random.choice(['ProblemType3','ProblemTypeMCQ3']),
          random.choice(['ProblemType4','ProblemTypeMCQ4']),
          random.choice(['ProblemType5','ProblemTypeMCQ5']),
          random.choice(['ProblemType6','ProblemTypeMCQ6']),
          random.choice(['ProblemType7','ProblemTypeMCQ7']),
          random.choice(['ProblemType8','ProblemTypeMCQ8']),]

#Whole Numbers Rounding Off

P4WNRO = [random.choice(['ProblemType1','ProblemTypeMCQ1']),
          random.choice(['ProblemType2','ProblemTypeMCQ2']),
          random.choice(['ProblemType3','ProblemTypeMCQ3']),]

#Whole Numbers Write in Figures

P4WNWF = [random.choice(['ProblemType1','ProblemTypeMCQ1']),
          random.choice(['ProblemType2','ProblemTypeMCQ2']),
          random.choice(['ProblemType3','ProblemTypeMCQ3']),
          random.choice(['ProblemType4','ProblemTypeMCQ4']),
          random.choice(['ProblemType5','ProblemTypeMCQ5']),]

#Whole Numbers Write in Words

P4WNWW = [random.choice(['ProblemType1','ProblemTypeMCQ1']),
          random.choice(['ProblemType2','ProblemTypeMCQ2']),
          random.choice(['ProblemType3','ProblemTypeMCQ3']),
          random.choice(['ProblemType4','ProblemTypeMCQ4']),
          random.choice(['ProblemType5','ProblemTypeMCQ5']),]

#Whole Numbers Word Problems
P4WNWP = ['ProblemType1',random.choice(['ProblemType2a','ProblemType2b']),
          'ProblemType3','ProblemType4','ProblemType5','ProblemType6','ProblemType7','ProblemType8',]

#Data Analysis Table and Bar Graphs

P4DABG = [random.choice(['ProblemTypeMCQ1a','ProblemTypeMCQ1b']),
          'ProblemTypeMCQ1c',
          random.choice(['ProblemTypeMCQ2a','ProblemTypeMCQ2c']),
          random.choice(['ProblemTypeMCQ2b','ProblemTypeMCQ2d']),
          random.choice(['ProblemTypeMCQ3a','ProblemTypeMCQ3b','ProblemTypeMCQ3c',]),
          random.choice(['ProblemTypeMCQ3d','ProblemTypeMCQ3e','ProblemTypeMCQ3f',]),
          ]

#Data Analysis Line Graphs

P4DALG = [random.choice(['ProblemTypeMCQ1a','ProblemTypeMCQ1b']),
          'ProblemType1c',
          random.choice(['ProblemType2a','ProblemType2b']),
          random.choice(['ProblemType2c','ProblemType2d']),
          random.choice(['ProblemTypeMCQ3a','ProblemTypeMCQ3b',]),
          random.choice(['ProblemTypeMCQ3c','ProblemTypeMCQ3d',]),
          ]


ConceptsID = {'P4DecimalsAddSub':P4DCAS,
              'P4DecimalsComparingOrdering':P4DCCO,
              'P4DecimalsFractions':P4DCFR,
              'P4DecimalsHundredths':P4DCHD,
              'P4DecimalsMultiplyDivide':P4DCMD,
              'P4DecimalsRoundingOff':P4DCRO,
              'P4DecimalsTenths':P4DCTT,
              'P4DecimalsThousandths':P4DCTH,
              'P4DCWordProblems':P4DCWP,
              'P4FractionsAdd':P4FRAL,
              'P4FractionsMixedImproper':P4FRMN,
              'P4FractionsMultiplication':P4FRMP,
              'P4FractionsSimplifying':P4FRSF,
              'P4FractionsSubtract':P4FRSL,
              'P4FRWordProblems':P4FRWP,
              'P4MTArea':P4MTAR,
              'P4MTCompositeFigures':P4MTCF,
              'P4MTPerimeter':P4MTPR,
              'P4MTTime24Hrs':P4MTTH,
              'P4MTTimeDuration':P4MTTD,
              'P4WholeNumbersComparingOrdering':P4WNCO,
              'P4WholeNumbersFactorMultiple':P4WNFM,
              'P4WholeNumbersMutliplyDivide':P4WNMD,
              'P4WholeNumbersPlaceValues':P4WNPV,
              'P4WholeNumbersRoundingOff':P4WNRO,
              'P4WholeNumbersWriteInFigures':P4WNWF,
              'P4WholeNumbersWriteInWords':P4WNWW,
              'P4WNWordProblems':P4WNWP,
              'P4DATablesBarGraphs':P4DABG,
              'P4DALineGraphs':P4DALG,
              }

'''12 is the weight of the 3rd level concept (1st level:Primary 4, 2nd Level:Decimal, 3rd Level:Addition Subtraction'''

Concepts = {'P4DC':[['P4DecimalsAddSub',6,P4DCAS],
                    ['P4DecimalsComparingOrdering',6,P4DCCO],
                    ['P4DecimalsFractions',6,P4DCFR],
                    ['P4DecimalsHundredths',6,P4DCHD],
                    ['P4DecimalsMultiplyDivide',6,P4DCMD],
                    ['P4DecimalsRoundingOff',6,P4DCRO],
                    ['P4DecimalsTenths',6,P4DCTT],
                    ['P4DecimalsThousandths',6,P4DCTH],
                    ['P4DCWordProblems',50,P4DCWP],
                   ],
            'P4FR':[['P4FractionsAdd',12,P4FRAL],
                    ['P4FractionsMixedImproper',12,P4FRMN],
                    ['P4FractionsMultiplication',12,P4FRMP],
                    ['P4FractionsSimplifying',12,P4FRSF],
                    ['P4FractionsSubtract',12,P4FRSL],
                    ['P4FRWordProblems',40,P4FRWP],
                   ],
            'P4MT':[['P4MTArea',20,P4MTAR],
                    ['P4MTCompositeFigures',40,P4MTCF],
                    ['P4MTPerimeter',20,P4MTPR],
                    ['P4MTTime24Hrs',10,P4MTTH],
                    ['P4MTTimeDuration',10,P4MTTD],
                   ],                      
            'P4WN':[['P4WholeNumbersComparingOrdering',13,P4WNCO],
                    ['P4WholeNumbersFactorMultiple',10,P4WNFM],
                    ['P4WholeNumbersMutliplyDivide',8,P4WNMD],
                    ['P4WholeNumbersPlaceValues',7,P4WNPV],
                    ['P4WholeNumbersRoundingOff',7,P4WNRO],
                    ['P4WholeNumbersWriteInFigures',10,P4WNWF],
                    ['P4WholeNumbersWriteInWords',10,P4WNWW],
                    ['P4WNWordProblems',40,P4WNWP]
                   ],
            'P4DA':[['P4DATablesBarGraphs',50,P4DABG],
                    ['P4DALineGraphs',50,P4DALG],
                   ],            
            }

def P4ConceptList(questions,concept):
    ConceptList = []
    '''For individual sub topics there is no Concepts dictionary'''
    if not concept in Concepts:
        Concepts.update({concept:[[concept,99,ConceptsID[concept]]]})
       
    for i in range(len(Concepts[concept])):
        ConceptQuestions = Concepts[concept][i][1]*questions/100+1
        try:
            ProblemTypes = random.sample(Concepts[concept][i][2],ConceptQuestions)
        except ValueError:
            ProblemTypes = []
            p = 0
            for _k in range(ConceptQuestions):                
                ProblemTypes.append(Concepts[concept][i][2][p])
                '''17-APR-2013: Logic to rotate all problems if number of problems in a topic is less than problems required for worksheet'''
                if p+1>=len(Concepts[concept][i][2]):
                    p = 0
                else:
                    p = p + 1
        for j in range(ConceptQuestions):
            ConceptList.append([Concepts[concept][i][0],ProblemTypes[j]])
    return ConceptList